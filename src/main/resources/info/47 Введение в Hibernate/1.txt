47 Введение в Hibernate

На прошлых уроках мы уже связывали Java приложение
с БД с помощью JDBC API, потом c помощью JdbcTemplate

Наблюдение за классами и таблицами

Java                    Реляционные БД
Название класса         Название таблицы
Объект класса           Строка таблицы
Список объектов List    Таблица
Поле в классе           Столбец в таблице

Мы видим что наблюдается некоторое соответствие

Для того, чтобы объекты передавать в таблицу
было придумано:
Object Relational Mapping - ORM Hibernate
отображение объектов в таблице - и наоборот,
где ORM автоматически может выполнять все действия
JDBC и SQL

Помимо обычных CRUD действий мы можем также
выстаивать связи между сущностями,
связи один-к-одному, один-ко-многим и т.д.
(см Связи между сущностями.png)

При этом мы практически не выходим из Java
применяя обычные java-команды

Порядок примерно такой -
мы создаем сессию, в ней начинаем транзакцию,
в транзакции выполняем нужные операции,
завершаем транзакцию, завершаем сессию

---

Сессия - обязательный
объект для взаимодействия с Hibernate.
(см Сессия.png)
Любые действия с Hibernate проходят через сессию.
Объект сессии получаем из объекта SessionFactory -
фабрика сессий

---

Транзакция - единица работы с БД.
Нужны для поддержания согласованности данных в таблице.
Транзакции могут блокировать доступ к БД, на запись,
на чтение и т.д. Пример
(см Транзакции блокировки.png)

Транзакции можно применять - Commit,
и откатывать - Rollback
В транзакции могут участвововать несколько операций
с БД.

Самый распространенный пример транзакции -
банковские операции. Мы снимаем деньги с одного счета
и переносим на другой с рядом проверок - все эти операнции
с БД будут одной транзакцией, или все проходят или
все откатываются в итоге в исходное состояние