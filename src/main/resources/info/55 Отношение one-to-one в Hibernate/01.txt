55 Отношение one-to-one в Hibernate

Для выражения отношений один к одному используются
следующие аннотации
@OneToOne и @JoinColumn

Будем работать с 2 таблицами Passport и Person
(см one_to_one.png)
Это равноправные таблицы, поэтому @OneToOne
используется с обоих сторон

Следует учесть что в таблице Passport
Роль id выполняет person_id.
Но это только один из вариантов,
также id может быть отдельной колонкой

Особенностью может служить то, что при загрузке
один ко многим Hibernate будет пользоваться ленивой
загрузкой, а в случае один к одному - нормальной

------

Другой вариант построения связи один к одному
(см one_to_one2.png)
Проблема в том, что в Passport нет собственного
id, person_id  выполняет 2 функциии
это не очень удобно.
Для решения этого вопроса мы делаем 3 колонки
1 - свой id
2 - номер паспорта
3 - person_id со ссылкой на id  в Person и
с параметром UNIQUE
